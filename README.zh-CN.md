<center>

# CodexUsage â€” AI ç¼–ç¨‹åŠ©æ‰‹ä½¿ç”¨é‡è¿½è¸ªå™¨

[![rust](https://img.shields.io/badge/Rust-stable-orange?logo=rust&logoColor=white)](https://www.rust-lang.org/)
[![tests](https://github.com/Mai0313/codex_usage/actions/workflows/test.yml/badge.svg)](https://github.com/Mai0313/codex_usage/actions/workflows/test.yml)
[![code-quality](https://github.com/Mai0313/codex_usage/actions/workflows/code-quality-check.yml/badge.svg)](https://github.com/Mai0313/codex_usage/actions/workflows/code-quality-check.yml)
[![license](https://img.shields.io/badge/License-MIT-green.svg?labelColor=gray)](https://github.com/Mai0313/codex_usage/tree/master?tab=License-1-ov-file)
[![PRs](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](https://github.com/Mai0313/codex_usage/pulls)

</center>

**å®æ—¶è¿½è¸ªæ‚¨çš„ AI ç¼–ç¨‹æˆæœ¬ã€‚** CodexUsage æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ CLI å·¥å…·ï¼Œå¸®åŠ©æ‚¨ç›‘æ§å’Œåˆ†æ Claude Code å’Œ Codex çš„ä½¿ç”¨æƒ…å†µï¼Œæä¾›è¯¦ç»†çš„æˆæœ¬åˆ†è§£ã€token ç»Ÿè®¡å’Œä»£ç æ“ä½œæ´å¯Ÿã€‚

[English](README.md) | [ç¹é«”ä¸­æ–‡](README.zh-TW.md) | [ç®€ä½“ä¸­æ–‡](README.zh-CN.md)

---

## ğŸ¯ ä¸ºä»€ä¹ˆé€‰æ‹© CodexUsageï¼Ÿ

### ğŸ’° äº†è§£æ‚¨çš„æˆæœ¬
ä¸å†ç–‘æƒ‘æ‚¨çš„ AI ç¼–ç¨‹ä¼šè¯èŠ±è´¹å¤šå°‘ã€‚é€šè¿‡ [LiteLLM](https://github.com/BerriAI/litellm) è‡ªåŠ¨æ›´æ–°å®šä»·ï¼Œè·å–**å®æ—¶æˆæœ¬è¿½è¸ª**ã€‚

### ğŸ“Š ç²¾ç¾çš„å¯è§†åŒ–
é€‰æ‹©æ‚¨å–œæ¬¢çš„è§†å›¾ï¼š
- **äº¤äº’å¼ä»ªè¡¨æ¿**ï¼šè‡ªåŠ¨åˆ·æ–°çš„ç»ˆç«¯ UIï¼Œå®æ—¶æ›´æ–°
- **é™æ€æŠ¥è¡¨**ï¼šä¸“ä¸šçš„è¡¨æ ¼ï¼Œé€‚åˆæ–‡æ¡£
- **è„šæœ¬å‹å¥½**ï¼šçº¯æ–‡æœ¬å’Œ JSONï¼Œä¾¿äºè‡ªåŠ¨åŒ–
- **å®Œæ•´ç²¾åº¦**ï¼šå¯¼å‡ºç²¾ç¡®æˆæœ¬ï¼Œç”¨äºè´¢åŠ¡æ ¸ç®—

### ğŸš€ é›¶é…ç½®
è‡ªåŠ¨æ£€æµ‹å¹¶å¤„ç† Claude Code å’Œ Codex çš„æ—¥å¿—ã€‚æ— éœ€è®¾ç½®â€”â€”åªéœ€è¿è¡Œå’Œåˆ†æã€‚

### ğŸ¨ ä¸°å¯Œçš„æ´å¯Ÿ
- æŒ‰æ¨¡å‹å’Œæ—¥æœŸçš„ token ä½¿ç”¨é‡
- æŒ‰ç¼“å­˜ç±»å‹çš„æˆæœ¬åˆ†è§£
- æ–‡ä»¶æ“ä½œè¿½è¸ª
- å‘½ä»¤æ‰§è¡Œå†å²
- Git ä»“åº“ä¿¡æ¯

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | æè¿° |
|---------|-------------|
| ğŸ¤– **è‡ªåŠ¨æ£€æµ‹** | æ™ºèƒ½è¯†åˆ« Claude Code æˆ– Codex æ—¥å¿— |
| ğŸ’µ **æ™ºèƒ½å®šä»·** | æ¨¡ç³Šæ¨¡å‹åŒ¹é… + æ¯æ—¥ç¼“å­˜ä»¥æé«˜é€Ÿåº¦ |
| ğŸ¨ **4 ç§æ˜¾ç¤ºæ¨¡å¼** | äº¤äº’å¼ã€è¡¨æ ¼ã€æ–‡æœ¬å’Œ JSON è¾“å‡º |
| ğŸ“ˆ **å…¨é¢ç»Ÿè®¡** | Tokenã€æˆæœ¬ã€æ–‡ä»¶æ“ä½œå’Œå·¥å…·è°ƒç”¨ |
| âš¡ **é«˜æ€§èƒ½** | ä½¿ç”¨ Rust æ„å»ºï¼Œé€Ÿåº¦å¿«ä¸”å¯é  |
| ğŸ”„ **å®æ—¶æ›´æ–°** | ä»ªè¡¨æ¿æ¯ç§’åˆ·æ–° |
| ğŸ’¾ **é«˜æ•ˆç¼“å­˜** | æ™ºèƒ½çš„æ¯æ—¥ç¼“å­˜å‡å°‘ API è°ƒç”¨ |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

**å‰ææ¡ä»¶**ï¼š[Rust å·¥å…·é“¾](https://rustup.rs/)ï¼ˆ1.70+ï¼‰

```bash
# å…‹éš†å’Œæ„å»º
git clone https://github.com/Mai0313/codex_usage.git
cd CodexUsage
cargo build --release

# äºŒè¿›åˆ¶æ–‡ä»¶ä½ç½®ï¼š./target/release/codex_usage
```

### é¦–æ¬¡è¿è¡Œ

```bash
# ä½¿ç”¨äº¤äº’å¼ä»ªè¡¨æ¿æŸ¥çœ‹ä½¿ç”¨é‡
./target/release/codex_usage usage

# æˆ–åˆ†æç‰¹å®šå¯¹è¯
./target/release/codex_usage analysis --path ~/.claude/projects/session.jsonl
```

---

## ğŸ“– å‘½ä»¤æŒ‡å—

### ğŸ” å¿«é€Ÿå‚è€ƒ

```bash
codex_usage <å‘½ä»¤> [é€‰é¡¹]

å‘½ä»¤ï¼š
  usage       æ˜¾ç¤º token ä½¿ç”¨é‡å’Œæˆæœ¬ï¼ˆé»˜è®¤ï¼šäº¤äº’å¼ï¼‰
  analysis    åˆ†æå¯¹è¯æ–‡ä»¶å¹¶å¯¼å‡ºæ•°æ®
  version     æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
  help        æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

---

## ğŸ’° Usage å‘½ä»¤

**è¿½è¸ªæ‚¨æ‰€æœ‰ AI ç¼–ç¨‹ä¼šè¯çš„æ”¯å‡ºã€‚**

### åŸºæœ¬ç”¨æ³•

```bash
# äº¤äº’å¼ä»ªè¡¨æ¿ï¼ˆæ¨èï¼‰
codex_usage usage

# é™æ€è¡¨æ ¼ï¼Œé€‚åˆæŠ¥è¡¨
codex_usage usage --table

# çº¯æ–‡æœ¬ï¼Œé€‚åˆè„šæœ¬
codex_usage usage --text

# JSONï¼Œé€‚åˆæ•°æ®å¤„ç†
codex_usage usage --json
```

### æ‚¨å°†è·å¾—ä»€ä¹ˆ

è¯¥å·¥å…·è‡ªåŠ¨æ‰«æè¿™äº›ç›®å½•ï¼š
- `~/.claude/projects/*.jsonl`ï¼ˆClaude Codeï¼‰
- `~/.codex/sessions/*.jsonl`ï¼ˆCodexï¼‰

### ğŸ¨ äº¤äº’å¼æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰

**æ¯ç§’æ›´æ–°çš„å®æ—¶ä»ªè¡¨æ¿**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ğŸ“Š Token ä½¿ç”¨ç»Ÿè®¡                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ—¥æœŸ       â”‚ æ¨¡å‹                 â”‚ è¾“å…¥       â”‚ è¾“å‡º       â”‚ ç¼“å­˜è¯»å–   â”‚ ç¼“å­˜åˆ›å»º     â”‚ æ€»è®¡       â”‚ æˆæœ¬ (USD) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2025-10-01 â”‚ claude-sonnet-4-20â€¦  â”‚ 45,230     â”‚ 12,450     â”‚ 230,500    â”‚ 50,000       â”‚ 338,180    â”‚ $2.15      â”‚
â”‚ 2025-10-02 â”‚ claude-sonnet-4-20â€¦  â”‚ 32,100     â”‚ 8,920      â”‚ 180,000    â”‚ 30,000       â”‚ 251,020    â”‚ $1.58      â”‚
â”‚ 2025-10-03 â”‚ claude-sonnet-4-20â€¦  â”‚ 28,500     â”‚ 7,200      â”‚ 150,000    â”‚ 25,000       â”‚ 210,700    â”‚ $1.32      â”‚
â”‚ 2025-10-03 â”‚ gpt-4-turbo          â”‚ 15,000     â”‚ 5,000      â”‚ 0          â”‚ 0            â”‚ 20,000     â”‚ $0.25      â”‚
â”‚            â”‚ æ€»è®¡                 â”‚ 120,830    â”‚ 33,570     â”‚ 560,500    â”‚ 105,000      â”‚ 819,900    â”‚ $5.30      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’° æ€»æˆæœ¬ï¼š$5.30  |  ğŸ”¢ æ€» Tokenï¼š819,900  |  ğŸ“… æ¡ç›®ï¼š4  |  ğŸ§  å†…å­˜ï¼š12.5 MB                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æŒ‰ 'q'ã€'Esc' æˆ– 'Ctrl+C' é€€å‡º
```

**ç‰¹æ€§**ï¼š
- âœ¨ æ¯ç§’è‡ªåŠ¨åˆ·æ–°
- ğŸ¯ é«˜äº®ä»Šæ—¥æ¡ç›®
- ğŸ”„ æ˜¾ç¤ºæœ€è¿‘æ›´æ–°çš„è¡Œ
- ğŸ’¾ æ˜¾ç¤ºå†…å­˜ä½¿ç”¨é‡
- ğŸ“Š æ±‡æ€»ç»Ÿè®¡

**æ§åˆ¶**ï¼šæŒ‰ `q`ã€`Esc` æˆ– `Ctrl+C` é€€å‡º

### ğŸ“‹ é™æ€è¡¨æ ¼æ¨¡å¼

**éå¸¸é€‚åˆæ–‡æ¡£å’ŒæŠ¥è¡¨**

```bash
codex_usage usage --table
```

```
ğŸ“Š Token ä½¿ç”¨ç»Ÿè®¡

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ æ—¥æœŸ       â•‘ æ¨¡å‹                 â•‘ è¾“å…¥       â•‘ è¾“å‡º       â•‘ ç¼“å­˜è¯»å–   â•‘ ç¼“å­˜åˆ›å»º     â•‘ æ€» Token     â•‘ æˆæœ¬ (USD) â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ 2025-10-01 â•‘ claude-sonnet-4-20â€¦  â•‘ 45,230     â•‘ 12,450     â•‘ 230,500    â•‘ 50,000       â•‘ 338,180      â•‘ $2.15      â•‘
â•‘ 2025-10-02 â•‘ claude-sonnet-4-20â€¦  â•‘ 32,100     â•‘ 8,920      â•‘ 180,000    â•‘ 30,000       â•‘ 251,020      â•‘ $1.58      â•‘
â•‘ 2025-10-03 â•‘ claude-sonnet-4-20â€¦  â•‘ 28,500     â•‘ 7,200      â•‘ 150,000    â•‘ 25,000       â•‘ 210,700      â•‘ $1.32      â•‘
â•‘            â•‘ æ€»è®¡                 â•‘ 105,830    â•‘ 28,570     â•‘ 560,500    â•‘ 105,000      â•‘ 799,900      â•‘ $5.05      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### ğŸ“ æ–‡æœ¬æ¨¡å¼

**éå¸¸é€‚åˆè„šæœ¬å’Œè§£æ**

```bash
codex_usage usage --text
```

```
2025-10-01 > claude-sonnet-4-20250514: $2.154230
2025-10-02 > claude-sonnet-4-20250514: $1.583450
2025-10-03 > claude-sonnet-4-20250514: $1.321200
2025-10-03 > gpt-4-turbo: $0.250000
```

### ğŸ—‚ï¸ JSON æ¨¡å¼

**å®Œæ•´ç²¾åº¦ï¼Œç”¨äºè´¢åŠ¡æ ¸ç®—å’Œé›†æˆ**

```bash
codex_usage usage --json
```

```json
{
  "2025-10-01": [
    {
      "model": "claude-sonnet-4-20250514",
      "usage": {
        "input_tokens": 45230,
        "output_tokens": 12450,
        "cache_read_input_tokens": 230500,
        "cache_creation_input_tokens": 50000,
        "cache_creation": {
          "ephemeral_5m_input_tokens": 50000
        },
        "service_tier": "standard"
      },
      "cost_usd": 2.1542304567890123
    }
  ]
}
```

### ğŸ” è¾“å‡ºå¯¹æ¯”

| ç‰¹æ€§ | äº¤äº’å¼ | è¡¨æ ¼ | æ–‡æœ¬ | JSON |
|---------|-------------|-------|------|------|
| **æœ€é€‚åˆ** | ç›‘æ§ | æŠ¥è¡¨ | è„šæœ¬ | é›†æˆ |
| **æˆæœ¬æ ¼å¼** | $2.15 | $2.15 | $2.154230 | 2.1542304567890123 |
| **æ›´æ–°** | å®æ—¶ | é™æ€ | é™æ€ | é™æ€ |
| **é¢œè‰²** | âœ… | âœ… | âŒ | âŒ |
| **å¯è§£æ** | âŒ | âŒ | âœ… | âœ… |

### ğŸ’¡ ä½¿ç”¨åœºæ™¯

- **é¢„ç®—è¿½è¸ª**ï¼šç›‘æ§æ‚¨çš„æ¯æ—¥ AI æ”¯å‡º
- **æˆæœ¬ä¼˜åŒ–**ï¼šè¯†åˆ«æ˜‚è´µçš„ä¼šè¯
- **å›¢é˜ŸæŠ¥å‘Š**ï¼šä¸ºç®¡ç†å±‚ç”Ÿæˆä½¿ç”¨æŠ¥å‘Š
- **è´¦å•**ï¼šå¯¼å‡ºç²¾ç¡®æˆæœ¬ç”¨äºå¼€ç¥¨
- **ç›‘æ§**ï¼šæ´»è·ƒå¼€å‘çš„å®æ—¶ä»ªè¡¨æ¿

---

## ğŸ“Š Analysis å‘½ä»¤

**æ·±å…¥äº†è§£ç‰¹å®šå¯¹è¯æ–‡ä»¶ã€‚**

### åŸºæœ¬ç”¨æ³•

```bash
# åˆ†æå¹¶æ˜¾ç¤º
codex_usage analysis --path ~/.claude/projects/session.jsonl

# ä¿å­˜åˆ°æ–‡ä»¶
codex_usage analysis --path ~/.claude/projects/session.jsonl --output report.json
```

### æ‚¨å°†è·å¾—ä»€ä¹ˆ

è¯¦ç»†çš„ JSON æŠ¥å‘ŠåŒ…æ‹¬ï¼š
- **Token ä½¿ç”¨é‡**ï¼šæŒ‰æ¨¡å‹çš„è¾“å…¥ã€è¾“å‡ºå’Œç¼“å­˜ç»Ÿè®¡
- **æ–‡ä»¶æ“ä½œ**ï¼šæ¯æ¬¡è¯»å–ã€å†™å…¥å’Œç¼–è¾‘çš„å®Œæ•´è¯¦æƒ…
- **å‘½ä»¤å†å²**ï¼šæ‰€æœ‰æ‰§è¡Œçš„ shell å‘½ä»¤
- **å·¥å…·ä½¿ç”¨**ï¼šæ¯ç§å·¥å…·ç±»å‹çš„ä½¿ç”¨æ¬¡æ•°
- **å…ƒæ•°æ®**ï¼šç”¨æˆ·ã€æœºå™¨ IDã€Git ä»“åº“ã€æ—¶é—´æˆ³

### ç¤ºä¾‹è¾“å‡º

```json
{
  "extensionName": "Claude-Code",
  "insightsVersion": "0.1.0",
  "user": "wei",
  "machineId": "5b0dfa41ada84d5180a514698f67bd80",
  "records": [
    {
      "conversationUsage": {
        "claude-sonnet-4-20250514": {
          "input_tokens": 252,
          "output_tokens": 3921,
          "cache_read_input_tokens": 1298818,
          "cache_creation_input_tokens": 124169
        }
      },
      "toolCallCounts": {
        "Read": 15,
        "Write": 4,
        "Edit": 2,
        "Bash": 5,
        "TodoWrite": 3
      },
      "totalUniqueFiles": 8,
      "totalWriteLines": 80,
      "totalReadLines": 120,
      "folderPath": "/home/wei/repo/project",
      "gitRemoteUrl": "https://github.com/user/project.git"
    }
  ]
}
```

### ğŸ’¡ ä½¿ç”¨åœºæ™¯

- **ä½¿ç”¨å®¡è®¡**ï¼šè¿½è¸ª AI åœ¨æ¯ä¸ªä¼šè¯ä¸­åšäº†ä»€ä¹ˆ
- **æˆæœ¬å½’å› **ï¼šè®¡ç®—æ¯ä¸ªé¡¹ç›®æˆ–åŠŸèƒ½çš„æˆæœ¬
- **åˆè§„æ€§**ï¼šå¯¼å‡ºè¯¦ç»†çš„æ´»åŠ¨æ—¥å¿—
- **åˆ†æ**ï¼šäº†è§£ç¼–ç æ¨¡å¼å’Œå·¥å…·ä½¿ç”¨

---

## ğŸ”§ Version å‘½ä»¤

**æ£€æŸ¥æ‚¨çš„å®‰è£…ã€‚**

```bash
# æ ¼å¼åŒ–è¾“å‡º
codex_usage version

# JSON æ ¼å¼
codex_usage version --json

# çº¯æ–‡æœ¬
codex_usage version --text
```

### è¾“å‡º

```
ğŸš€ Codex Usage Analyzer

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•—
â•‘ ç‰ˆæœ¬           â•‘ 0.1.0   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•£
â•‘ Rust ç‰ˆæœ¬      â•‘ 1.89.0  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•£
â•‘ Cargo ç‰ˆæœ¬     â•‘ 1.89.0  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ’¡ æ™ºèƒ½å®šä»·ç³»ç»Ÿ

### å·¥ä½œåŸç†

1. **è‡ªåŠ¨æ›´æ–°**ï¼šæ¯å¤©ä» [LiteLLM](https://github.com/BerriAI/litellm) è·å–å®šä»·
2. **æ™ºèƒ½ç¼“å­˜**ï¼šåœ¨ `~/.codex-usage/` ä¸­å­˜å‚¨å®šä»· 24 å°æ—¶
3. **æ¨¡ç³ŠåŒ¹é…**ï¼šå³ä½¿å¯¹äºè‡ªå®šä¹‰æ¨¡å‹åç§°ä¹Ÿèƒ½æ‰¾åˆ°æœ€ä½³åŒ¹é…
4. **å§‹ç»ˆå‡†ç¡®**ï¼šç¡®ä¿æ‚¨è·å¾—æœ€æ–°çš„å®šä»·

### æ¨¡å‹åŒ¹é…

**ä¼˜å…ˆçº§é¡ºåº**ï¼š
1. âœ… **ç²¾ç¡®åŒ¹é…**ï¼š`claude-sonnet-4` â†’ `claude-sonnet-4`
2. ğŸ”„ **è§„èŒƒåŒ–**ï¼š`claude-sonnet-4-20250514` â†’ `claude-sonnet-4`
3. ğŸ” **å­å­—ç¬¦ä¸²**ï¼š`custom-gpt-4` â†’ `gpt-4`
4. ğŸ¯ **æ¨¡ç³Šï¼ˆAI é©±åŠ¨ï¼‰**ï¼šä½¿ç”¨ Jaro-Winkler ç›¸ä¼¼åº¦ï¼ˆ70% é˜ˆå€¼ï¼‰
5. ğŸ’µ **åå¤‡**ï¼šå¦‚æœæ‰¾ä¸åˆ°åŒ¹é…åˆ™æ˜¾ç¤º $0.00

### æˆæœ¬è®¡ç®—

```
æ€»æˆæœ¬ = (è¾“å…¥ Token Ã— è¾“å…¥æˆæœ¬) +
         (è¾“å‡º Token Ã— è¾“å‡ºæˆæœ¬) +
         (ç¼“å­˜è¯»å– Ã— ç¼“å­˜è¯»å–æˆæœ¬) +
         (ç¼“å­˜åˆ›å»º Ã— ç¼“å­˜åˆ›å»ºæˆæœ¬)
```

---

## ğŸ³ Docker æ”¯æŒ

```bash
# æ„å»ºé•œåƒ
docker build -f docker/Dockerfile --target prod -t codex_usage:latest .

# ä½¿ç”¨æ‚¨çš„ä¼šè¯è¿è¡Œ
docker run --rm \
  -v ~/.claude:/root/.claude \
  -v ~/.codex:/root/.codex \
  codex_usage:latest usage
```

---

## ğŸ” æ•…éšœæ’é™¤

### å®šä»·æ•°æ®æœªåŠ è½½

```bash
# æ£€æŸ¥ç¼“å­˜
ls -la ~/.codex-usage/

# å¼ºåˆ¶åˆ·æ–°
rm -rf ~/.codex-usage/
codex_usage usage

# è°ƒè¯•æ¨¡å¼
RUST_LOG=debug codex_usage usage
```

### æ²¡æœ‰æ˜¾ç¤ºä½¿ç”¨æ•°æ®

```bash
# éªŒè¯ä¼šè¯ç›®å½•
ls -la ~/.claude/projects/
ls -la ~/.codex/sessions/

# ç»Ÿè®¡ JSONL æ–‡ä»¶
find ~/.claude/projects -name "*.jsonl" | wc -l
find ~/.codex/sessions -name "*.jsonl" | wc -l
```

### Analysis å‘½ä»¤å¤±è´¥

```bash
# éªŒè¯ JSONL æ ¼å¼
jq empty < your-file.jsonl

# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la your-file.jsonl

# ä½¿ç”¨è°ƒè¯•è¾“å‡ºè¿è¡Œ
RUST_LOG=debug codex_usage analysis --path your-file.jsonl
```

### äº¤äº’å¼æ¨¡å¼é—®é¢˜

```bash
# å¦‚æœä¸­æ–­åˆ™é‡ç½®ç»ˆç«¯
reset

# æ£€æŸ¥ç»ˆç«¯ç±»å‹
echo $TERM  # åº”è¯¥æ˜¯ xterm-256color æˆ–å…¼å®¹

# ä½¿ç”¨é™æ€è¡¨æ ¼ä½œä¸ºåå¤‡
codex_usage usage --table
```

---

## âš¡ æ€§èƒ½

ä½¿ç”¨ Rust æ„å»ºï¼Œè¿½æ±‚**é€Ÿåº¦**å’Œ**å¯é æ€§**ï¼š

| æ“ä½œ | æ—¶é—´ |
|-----------|------|
| è§£æ 10MB JSONL | ~320ms |
| åˆ†æ 1000 ä¸ªäº‹ä»¶ | ~45ms |
| åŠ è½½ç¼“å­˜çš„å®šä»· | ~2ms |
| äº¤äº’å¼åˆ·æ–° | ~30ms |

**äºŒè¿›åˆ¶å¤§å°**ï¼š~3-5 MBï¼ˆå‰¥ç¦»åï¼‰

---

## ğŸ“š äº†è§£æ›´å¤š

- **å¼€å‘è€…æ–‡æ¡£**ï¼šå‚è§ [.github/copilot-instructions.md](.github/copilot-instructions.md)
- **æŠ¥å‘Šé—®é¢˜**ï¼š[GitHub Issues](https://github.com/Mai0313/codex_usage/issues)
- **æºä»£ç **ï¼š[GitHub ä»“åº“](https://github.com/Mai0313/codex_usage)

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼æ–¹æ³•å¦‚ä¸‹ï¼š

1. Fork ä»“åº“
2. åˆ›å»ºæ‚¨çš„åŠŸèƒ½åˆ†æ”¯
3. è¿›è¡Œæ›´æ”¹
4. æäº¤æ‹‰å–è¯·æ±‚

æœ‰å…³å¼€å‘è®¾ç½®å’ŒæŒ‡å—ï¼Œè¯·å‚è§ [.github/copilot-instructions.md](.github/copilot-instructions.md)ã€‚

---

## ğŸ“„ è®¸å¯è¯

MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE)ã€‚

---

## ğŸ™ é¸£è°¢

- [LiteLLM](https://github.com/BerriAI/litellm) æä¾›æ¨¡å‹å®šä»·æ•°æ®
- Claude Code å’Œ Codex å›¢é˜Ÿåˆ›å»ºäº†å‡ºè‰²çš„ AI ç¼–ç¨‹åŠ©æ‰‹
- Rust ç¤¾åŒºæä¾›äº†ä¼˜ç§€çš„å·¥å…·

---

<center>

**çœé’±ã€‚è¿½è¸ªä½¿ç”¨é‡ã€‚æ›´æ™ºèƒ½åœ°ç¼–ç¨‹ã€‚**

å¦‚æœæ‚¨è§‰å¾—æœ‰ç”¨ï¼Œè¯·[â­ Star è¿™ä¸ªé¡¹ç›®](https://github.com/Mai0313/codex_usage)ï¼

ä½¿ç”¨ ğŸ¦€ Rust åˆ¶ä½œ

</center>
